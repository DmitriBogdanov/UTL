
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dmitribogdanov.github.io/UTL/module_json.html">
      
      
        <link rel="prev" href="module_integral.html">
      
      
        <link rel="next" href="module_log.html">
      
      
      <link rel="icon" href="images/icon_site_logo.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>utl::json - UTL</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="mkdocs/callouts.css">
    
      <link rel="stylesheet" href="mkdocs/width.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="utl::json - UTL" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://dmitribogdanov.github.io/UTL/assets/images/social/module_json.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://dmitribogdanov.github.io/UTL/module_json.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="utl::json - UTL" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://dmitribogdanov.github.io/UTL/assets/images/social/module_json.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utljson" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="UTL" class="md-header__button md-logo" aria-label="UTL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.71 20.29-1.42 1.42a1 1 0 0 1-1.41 0L7 9.85A3.8 3.8 0 0 1 6 10a4 4 0 0 1-3.78-5.3l2.54 2.54.53-.53 1.42-1.42.53-.53L4.7 2.22A4 4 0 0 1 10 6a3.8 3.8 0 0 1-.15 1l11.86 11.88a1 1 0 0 1 0 1.41M2.29 18.88a1 1 0 0 0 0 1.41l1.42 1.42a1 1 0 0 0 1.41 0l5.47-5.46-2.83-2.83M20 2l-4 2v2l-2.17 2.17 2 2L18 8h2l2-4Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UTL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              utl::json
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/DmitriBogdanov/UTL" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    DmitriBogdanov/UTL
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="UTL" class="md-nav__button md-logo" aria-label="UTL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.71 20.29-1.42 1.42a1 1 0 0 1-1.41 0L7 9.85A3.8 3.8 0 0 1 6 10a4 4 0 0 1-3.78-5.3l2.54 2.54.53-.53 1.42-1.42.53-.53L4.7 2.22A4 4 0 0 1 10 6a3.8 3.8 0 0 1-.15 1l11.86 11.88a1 1 0 0 1 0 1.41M2.29 18.88a1 1 0 0 0 0 1.41l1.42 1.42a1 1 0 0 0 1.41 0l5.47-5.46-2.83-2.83M20 2l-4 2v2l-2.17 2.17 2 2L18 8h2l2-4Z"/></svg>

    </a>
    UTL
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DmitriBogdanov/UTL" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    DmitriBogdanov/UTL
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_assertion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::assertion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_bit.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::bit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_enum_reflect.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::enum_reflect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_integral.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::integral
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    utl::json
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="module_json.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    utl::json
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#feature-support" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Definitions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node-class" class="md-nav__link">
    <span class="md-ellipsis">
      Node Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#member-types" class="md-nav__link">
    <span class="md-ellipsis">
      Member types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getters" class="md-nav__link">
    <span class="md-ellipsis">
      Getters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Object methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Array methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignment-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Assignment &amp; Constructors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializing" class="md-nav__link">
    <span class="md-ellipsis">
      Serializing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typedefs" class="md-nav__link">
    <span class="md-ellipsis">
      Typedefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Reflection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parseserialize-json" class="md-nav__link">
    <span class="md-ellipsis">
      Parse/serialize JSON
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setters-type-conversions" class="md-nav__link">
    <span class="md-ellipsis">
      Setters &amp; type conversions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getters_1" class="md-nav__link">
    <span class="md-ellipsis">
      Getters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatting" class="md-nav__link">
    <span class="md-ellipsis">
      Formatting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Structure reflection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-structure-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Complex structure reflection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests" class="md-nav__link">
    <span class="md-ellipsis">
      Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benchmarks" class="md-nav__link">
    <span class="md-ellipsis">
      Benchmarks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benchmarks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#some-thoughts-on-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Some thoughts on implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_log.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::log
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_math.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::math
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_mvl.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::mvl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_parallel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::parallel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_predef.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::predef
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_profiler.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::profiler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_progressbar.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::progressbar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_random.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::random
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_shell.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_sleep.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::sleep
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_stre.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::stre
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_strong_type.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::strong_type
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_struct_reflect.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::struct_reflect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_table.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::table
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_time.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    utl::time
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_selecting_modules.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Selecting modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_fetching_library.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fetching the library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_reserved_names.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reserved names
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_building_project.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building the repo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_building_docs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_versioning.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantic versioning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_reproducing_figures.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reproducing figures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="blog/cpp_performance_issues.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What separates C++ from being a "perfect" performance-oriented language
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="blog/map_macro_reflection.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Map-macro: Emulating reflection
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="guide_license.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#feature-support" class="md-nav__link">
    <span class="md-ellipsis">
      Feature Support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Definitions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node-class" class="md-nav__link">
    <span class="md-ellipsis">
      Node Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#member-types" class="md-nav__link">
    <span class="md-ellipsis">
      Member types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getters" class="md-nav__link">
    <span class="md-ellipsis">
      Getters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Object methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Array methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignment-constructors" class="md-nav__link">
    <span class="md-ellipsis">
      Assignment &amp; Constructors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializing" class="md-nav__link">
    <span class="md-ellipsis">
      Serializing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typedefs" class="md-nav__link">
    <span class="md-ellipsis">
      Typedefs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Reflection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parseserialize-json" class="md-nav__link">
    <span class="md-ellipsis">
      Parse/serialize JSON
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setters-type-conversions" class="md-nav__link">
    <span class="md-ellipsis">
      Setters &amp; type conversions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getters_1" class="md-nav__link">
    <span class="md-ellipsis">
      Getters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formatting" class="md-nav__link">
    <span class="md-ellipsis">
      Formatting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Structure reflection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-structure-reflection" class="md-nav__link">
    <span class="md-ellipsis">
      Complex structure reflection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests" class="md-nav__link">
    <span class="md-ellipsis">
      Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benchmarks" class="md-nav__link">
    <span class="md-ellipsis">
      Benchmarks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benchmarks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#some-thoughts-on-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Some thoughts on implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<p><a href="https://en.cppreference.com/w/cpp/17.html"><img src ="images/badge_language_cpp_17.svg"></a>
<a href="LICENSE.md"><img src ="images/badge_license_mit.svg"></a>
<a href="guide_versioning.html"><img src ="images/badge_semver.svg"></a>
<a href="https://dmitribogdanov.github.io/UTL/"><img src ="images/badge_docs.svg"></a>
<a href="https://en.wikipedia.org/wiki/Header-only"><img src ="images/badge_header_only.svg"></a>
<a href="https://github.com/DmitriBogdanov/UTL/tree/master/include/UTL"><img src ="images/badge_no_dependencies.svg"></a></p>
<p><a href="https://github.com/DmitriBogdanov/UTL/actions/workflows/windows.yml"><img src ="images/badge_workflow_windows.svg"></a>
<a href="https://github.com/DmitriBogdanov/UTL/actions/workflows/ubuntu.yml"><img src ="images/badge_workflow_ubuntu.svg"></a>
<a href="https://github.com/DmitriBogdanov/UTL/actions/workflows/macos.yml"><img src ="images/badge_workflow_macos.svg"></a>
<a href="https://github.com/DmitriBogdanov/UTL/actions/workflows/freebsd.yml"><img src ="images/badge_workflow_freebsd.svg"></a></p>
<h1 id="utljson">utl::json<a class="headerlink" href="#utljson" title="Permanent link">&para;</a></h1>
<p><a href="..">&lt;- to README.md</a></p>
<p><a href="../include/UTL/json.hpp">&lt;- to implementation.hpp</a></p>
<p><strong>utl::json</strong> module aims to provide an intuitive JSON manipulation API similar to <a href="https://github.com/nlohmann/json">nlohmann_json</a> while being a bit more lightweight and providing better performance. Key features are:</p>
<ul>
<li>Simple integration (single header, less than <code>1k</code> lines of code)</li>
<li>Intuitive API</li>
<li><a href="#benchmarks">Decent performance</a></li>
<li><a href="#error-handling">Nice error messages</a></li>
<li><a href="#structure-reflection">Recursive class reflection</a></li>
<li>Doesn't introduce any invasive macros or operators</li>
<li>Objects support transparent comparators (which means <code>std::string_view</code>, <code>const char*</code> and etc. can be used for lookup)</li>
<li>All JSON types map to standard library containers (<code>std::map</code>, <code>std::vector</code>, etc.), no need to learn custom APIs</li>
<li>Assignment &amp; reflection support custom container types</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Despite rather competitive performance, considerably faster parsing can be achieved with custom formatters, SIMD and unordered key optimizations (see <a href="https://github.com/simdjson/simdjson">simdjson</a>, <a href="https://github.com/stephenberry/glaze">Glaze</a>, <a href="https://github.com/Tencent/rapidjson">RapidJSON</a>  and <a href="https://github.com/ibireme/yyjson">yyjson</a>), this, however often comes at the expense of user convenience (like with <em>RapidJSON</em>) or features (<em>simdjson</em> is parser-only, <em>yyjson</em> is <code>C</code> and doesn't include reflection, <em>Glaze</em> has it all, but requires <a href="https://en.cppreference.com/w/cpp/23">C++23</a>).</p>
</div>
<h2 id="feature-support">Feature Support<a class="headerlink" href="#feature-support" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Implementation</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Parsing</td>
<td>✔</td>
<td></td>
</tr>
<tr>
<td>Serialization</td>
<td>✔</td>
<td></td>
</tr>
<tr>
<td>JSON Formatting</td>
<td>✔</td>
<td></td>
</tr>
<tr>
<td>JSON Validation</td>
<td>✔</td>
<td>Almost complete<a href="#tests">¹</a> validation with proper error messages through exceptions</td>
</tr>
<tr>
<td>Unicode Support</td>
<td>✔</td>
<td>Supports UTF-8</td>
</tr>
<tr>
<td>Control Character Escape Sequences</td>
<td>✔</td>
<td></td>
</tr>
<tr>
<td>Unicode Escape Sequences</td>
<td>✔</td>
<td>Full support including UTF-16 surrogate pairs</td>
</tr>
<tr>
<td>Trait-based Type Conversions</td>
<td>✔</td>
<td></td>
</tr>
<tr>
<td>Structure Reflection</td>
<td>✔</td>
<td>Recursive reflection including nested types and containers<a href="#complex-structure-reflection">²</a></td>
</tr>
<tr>
<td>Compile-time JSON Schema</td>
<td>✘</td>
<td>Outside the project scope, can be emulated with reflection</td>
</tr>
<tr>
<td>Lazy Node Loading</td>
<td>✘</td>
<td>Outside the project scope</td>
</tr>
</tbody>
</table>
<h2 id="definitions">Definitions<a class="headerlink" href="#definitions" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1">// JSON Node</span>
<span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Format</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">PRETTY</span><span class="p">,</span><span class="w"> </span><span class="n">MINIMIZED</span><span class="w"> </span><span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Node</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// - Member Types -</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">object_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Node</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;&gt;&gt;</span><span class="p">;</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">array_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">string_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">number_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">double</span><span class="p">;</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">bool_type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="kt">bool</span><span class="p">;</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">null_type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="k">class</span><span class="p">{};</span>

<span class="w">    </span><span class="c1">// - Getters -</span>
<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w">       </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get</span><span class="p">();</span>
<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="n">object_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_object</span><span class="p">();</span>
<span class="w">    </span><span class="n">array_type</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_array</span><span class="p">();</span>
<span class="w">    </span><span class="n">string_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_string</span><span class="p">();</span>
<span class="w">    </span><span class="n">number_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_number</span><span class="p">();</span>
<span class="w">    </span><span class="n">bool_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_bool</span><span class="p">();</span>
<span class="w">    </span><span class="n">null_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_null</span><span class="p">();</span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">object_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_object</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">array_type</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_array</span><span class="p">()</span><span class="w">  </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">string_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_string</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">number_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_number</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">bool_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_bool</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">null_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_null</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">is</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_object</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_array</span><span class="p">()</span><span class="w">  </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_string</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_number</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_bool</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">is_null</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w">       </span><span class="n">T</span><span class="o">*</span><span class="w"> </span><span class="n">get_if</span><span class="p">();</span>
<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">*</span><span class="w"> </span><span class="n">get_if</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// - Object methods -</span>
<span class="w">    </span><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w">         </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w">         </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="kt">bool</span><span class="w">              </span><span class="nf">contains</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">value_or</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">else_value</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// - Array methods -</span>
<span class="w">    </span><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">);</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w">         </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">);</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w">         </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">push_back</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w">  </span><span class="n">node</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">push_back</span><span class="p">(</span><span class="w">      </span><span class="n">Node</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">node</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// - Assignment -</span>
<span class="w">    </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<span class="w">    </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Node</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>

<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// type-trait based conversion</span>

<span class="w">    </span><span class="c1">// - Constructors -</span>
<span class="w">    </span><span class="n">Node</span><span class="p">()</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<span class="w">    </span><span class="n">Node</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<span class="w">    </span><span class="n">Node</span><span class="p">(</span><span class="n">Node</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>

<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// type-trait based conversion</span>

<span class="w">    </span><span class="c1">// Serializing</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w">          </span><span class="nf">to_string</span><span class="p">(</span><span class="w">                           </span><span class="n">Format</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Format</span><span class="o">::</span><span class="n">PRETTY</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w">                 </span><span class="nf">to_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">filepath</span><span class="p">,</span><span class="w"> </span><span class="n">Format</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Format</span><span class="o">::</span><span class="n">PRETTY</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">to_struct</span><span class="p">()</span><span class="w">                                                          </span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Typedefs</span>
<span class="k">using</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">object_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Array</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">array_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">string_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">number_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Bool</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">bool_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Null</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">null_type</span><span class="p">;</span>

<span class="c1">// Parsing</span>
<span class="n">Node</span><span class="w">                    </span><span class="nf">from_string</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">chars</span><span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">recursion_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="n">Node</span><span class="w">                    </span><span class="nf">from_file</span><span class="w">  </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">filepath</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">recursion_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="n">from_struct</span><span class="p">(</span><span class="k">const</span><span class="w">           </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="w">   </span><span class="p">);</span>

<span class="n">Node</span><span class="w"> </span><span class="n">literals</span><span class="o">::</span><span class="k">operator</span><span class="s">&quot;&quot;</span><span class="n">_utl_json</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">c_str</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">c_str_size</span><span class="p">);</span>

<span class="c1">// Reflection</span>
<span class="cp">#define UTL_JSON_REFLECT(struct_name, ...)</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_reflected_struct</span><span class="p">;</span>
</code></pre></div>
<h2 id="methods">Methods<a class="headerlink" href="#methods" title="Permanent link">&para;</a></h2>
<h3 id="node-class"><code>Node</code> Class<a class="headerlink" href="#node-class" title="Permanent link">&para;</a></h3>
<h4 id="member-types">Member types<a class="headerlink" href="#member-types" title="Permanent link">&para;</a></h4>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">object_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Node</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;&gt;&gt;</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">array_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">string_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">number_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">double</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">bool_type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="kt">bool</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">null_type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="k">class</span><span class="p">{};</span>
</code></pre></div>
</blockquote>
<p>Definitions of the types, corresponding to all possible JSON values according to <a href="https://ecma-international.org/wp-content/uploads/ECMA-404.pdf">ECMA-404 specification</a>: objects, arrays, strings, numbers, booleans and null.</p>
<h4 id="getters">Getters<a class="headerlink" href="#getters" title="Permanent link">&para;</a></h4>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w">       </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get</span><span class="p">();</span>
<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>If JSON node holds the value of a type <code>T</code>, returns a reference to the value, otherwise, throws <a href="https://en.cppreference.com/w/cpp/utility/variant/bad_variant_access">std::bad_variant_access</a>.</p>
<p><strong>Note:</strong> Similar to <a href="https://en.cppreference.com/w/cpp/utility/variant/get">std::get</a>.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">object_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_object</span><span class="p">();</span>
<span class="n">array_type</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_array</span><span class="p">();</span>
<span class="n">string_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_string</span><span class="p">();</span>
<span class="n">number_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_number</span><span class="p">();</span>
<span class="n">bool_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_bool</span><span class="p">();</span>
<span class="n">null_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_null</span><span class="p">();</span>

<span class="k">const</span><span class="w"> </span><span class="n">object_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_object</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">array_type</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_array</span><span class="p">()</span><span class="w">  </span><span class="k">const</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">string_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_string</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">number_type</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_number</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">bool_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_bool</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">null_type</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">get_null</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Shortcut versions of <code>T&amp; get&lt;T&gt;()</code> for all possible value types.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">is</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Returns whether JSON node contains a value of a type <code>T</code>.</p>
<p><strong>Note:</strong> Similar to <a href="https://en.cppreference.com/w/cpp/utility/variant/holds_alternative">std::holds_alternative</a>.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nf">is_object</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">is_array</span><span class="p">()</span><span class="w">  </span><span class="k">const</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">is_string</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">is_number</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">is_bool</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">is_null</span><span class="p">()</span><span class="w">   </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Shortcut versions of <code>T&amp; is&lt;T&gt;()</code> for all possible value types.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w">       </span><span class="n">T</span><span class="o">*</span><span class="w"> </span><span class="n">get_if</span><span class="p">();</span>
<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">*</span><span class="w"> </span><span class="n">get_if</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Returns a <code>T*</code> pointer to the value stored at the JSON node, if stored value has a different type than <code>T</code>, returns <a href="https://en.cppreference.com/w/cpp/language/nullptr">nullptr</a>.</p>
<p><strong>Note:</strong> Similar to <a href="https://en.cppreference.com/w/cpp/utility/variant/get_if">std::get_if</a>.</p>
<h4 id="object-methods">Object methods<a class="headerlink" href="#object-methods" title="Permanent link">&para;</a></h4>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Object methods can only be called for nodes that contain an object, incorrect node type will cause methods below to throw an exception.</p>
</div>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Returns a reference to the node corresponding to a given <code>key</code> in the JSON object, performs an insertion if such key does not already exist.</p>
<p><strong>Note:</strong> If current node is <code>null_type</code> overload <strong>(1)</strong> will convert it to <code>object_type</code> and perform an insertion. This allows for a more natural syntax.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Returns a reference to the node corresponding to a given <code>key</code> in the JSON object, throws an exception if such key does not exist. </p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nf">contains</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Returns whether JSON object node contains an entry with given <code>key</code>.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">value_or</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">else_value</span><span class="p">);</span>
</code></pre></div>
</blockquote>
<p>Returns value stored at given <code>key</code> in the JSON object, if no such key can be found returns <code>else_value</code>.</p>
<p><strong>Note:</strong> Logically equivalent to <code>object.contains(key) ? object.at(key).get&lt;T&gt;() : else_value</code>, but faster.</p>
<h4 id="array-methods">Array methods<a class="headerlink" href="#array-methods" title="Permanent link">&para;</a></h4>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Array methods can only be called for nodes that contain an array, incorrect node type will cause methods below to throw an exception.</p>
</div>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Returns a reference to the node at given <code>pos</code>. </p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">Node</span><span class="w">      </span><span class="o">&amp;</span><span class="w">         </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w">         </span><span class="nf">at</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Returns a reference to the node at given <code>pos</code>, throws an exception if index is out of bounds.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">push_back</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w">  </span><span class="n">node</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">push_back</span><span class="p">(</span><span class="w">      </span><span class="n">Node</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">node</span><span class="p">);</span>
</code></pre></div>
</blockquote>
<p>Inserts a new node at the end of JSON array.</p>
<p><strong>Note:</strong> If current node is <code>null_type</code> the method will convert it to <code>array_type</code> and perform an insertion. This allows for a more natural syntax.</p>
<h4 id="assignment-constructors">Assignment &amp; Constructors<a class="headerlink" href="#assignment-constructors" title="Permanent link">&para;</a></h4>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
</code></pre></div>
</blockquote>
<p>Converting assignment &amp; constructors. Tries to convert <code>T</code> to one of the possible JSON types based on <code>T</code> traits, conversions and provided methods. If no such conversion is possible, SFINAE rejects the overload.</p>
<h4 id="serializing">Serializing<a class="headerlink" href="#serializing" title="Permanent link">&para;</a></h4>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="n">Format</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Format</span><span class="o">::</span><span class="n">PRETTY</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Serializes JSON node to a string using a given <code>format</code>.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">to_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">filepath</span><span class="p">,</span><span class="w"> </span><span class="n">Format</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Format</span><span class="o">::</span><span class="n">PRETTY</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Serializes JSON node to the file at <code>filepath</code> using a given <code>format</code>.</p>
<p><strong>Note:</strong> Missing directories from <code>filepath</code> will be created automatically.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">to_struct</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Serializes JSON node to the structure / class object of type <code>T</code>.</p>
<p>Type <code>T</code> must be reflected with <code>UTL_JSON_REFLECT()</code> macro, otherwise compilation fails with a proper assertion.</p>
<h3 id="parsing">Parsing<a class="headerlink" href="#parsing" title="Permanent link">&para;</a></h3>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">Node</span><span class="w"> </span><span class="nf">from_string</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">recursion_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
</code></pre></div>
</blockquote>
<p>Parses JSON from a given string <code>buffer</code>.</p>
<p><strong>Note:</strong> JSON parsers need recursion depth limit to prevent malicious inputs (such as 100'000+ nested object opening braces) from causing stack overflows, instead we get a controllable <code>std::runtime_error</code>.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">Node</span><span class="w"> </span><span class="nf">from_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">filepath</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">recursion_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
</code></pre></div>
</blockquote>
<p>Parses JSON from the file at <code>filepath</code>.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="n">from_struct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
</code></pre></div>
</blockquote>
<p>Parses JSON from structure / class object <code>value</code>.</p>
<p>Type <code>T</code> must be reflected with <code>UTL_JSON_REFLECT()</code> macro, otherwise compilation fails with a proper assertion.</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="n">Node</span><span class="w"> </span><span class="n">literals</span><span class="o">::</span><span class="k">operator</span><span class="s">&quot;&quot;</span><span class="n">_utl_json</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">c_str</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">c_str_size</span><span class="p">);</span>
</code></pre></div>
</blockquote>
<p><code>json::Node</code> custom literals.</p>
<h3 id="typedefs">Typedefs<a class="headerlink" href="#typedefs" title="Permanent link">&para;</a></h3>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">object_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Array</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">array_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">string_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">number_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Bool</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">bool_type</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Null</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">Node</span><span class="o">::</span><span class="n">null_type</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Shorter typedefs for all existing JSON value types.</p>
<h3 id="reflection">Reflection<a class="headerlink" href="#reflection" title="Permanent link">&para;</a></h3>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="cp">#define UTL_JSON_REFLECT(struct_name, ...)</span>
</code></pre></div>
</blockquote>
<p>Reflects structure / class <code>struct_name</code> with member variables <code>...</code>.</p>
<p>Declaring this macro defines methods <code>Node::to_struct&lt;struct_name&gt;()</code> and <code>from_struct(const struct_name&amp;)</code> for parsing and serialization.</p>
<p><strong>Note 1:</strong> Reflection supports nested classes, each class should be reflected with a macro and <code>to_struct()</code> / <code>from_struct()</code> will call each other recursively whenever appropriate. Containers of reflected classes are also supported with any level of nesting. See <a href="#structure-reflection">examples</a>.</p>
<p><strong>Note 2:</strong> Reflection does not impose any strict limitations on member variable types, it uses the same set of type traits as other methods to deduce appropriate conversions. It is expected however, that array-like member variables should support <code>.resize()</code> (<a href="https://en.cppreference.com/w/cpp/container/vector">std::vector</a> and <a href="https://en.cppreference.com/w/cpp/container/list">std::list</a> satisfy that) or provide an API similar to <a href="https://en.cppreference.com/w/cpp/container/array">std::array</a>. For object-like types it is expected that new elements can be inserted with <code>operator[]</code> (<a href="https://en.cppreference.com/w/cpp/container/map">std::map</a> and <a href="https://en.cppreference.com/w/cpp/container/unordered_map">std::unordered_map</a> satisfy that).</p>
<blockquote>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_reflected_struct</span><span class="p">;</span>
</code></pre></div>
</blockquote>
<p>Evaluates to <code>true</code> if <code>T</code> was reflected with <code>UTL_JSON_REFLECT()</code>, <code>false</code> otherwise.</p>
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h2>
<h3 id="parseserialize-json">Parse/serialize JSON<a class="headerlink" href="#parseserialize-json" title="Permanent link">&para;</a></h3>
<p>[ <a href="https://godbolt.org/z/aEja9Gf1E">Run this code</a> ] [ <a href="../examples/module_json/parse_serialize_json.cpp">Open source file</a> ]</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">utl</span><span class="p">;</span>

<span class="c1">// Serialize JSON</span>
<span class="n">json</span><span class="o">::</span><span class="n">Node</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>

<span class="n">config</span><span class="p">[</span><span class="s">&quot;auxiliary_info&quot;</span><span class="p">]</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="n">config</span><span class="p">[</span><span class="s">&quot;date&quot;</span><span class="p">]</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;2024.04.02&quot;</span><span class="p">;</span>
<span class="n">config</span><span class="p">[</span><span class="s">&quot;options&quot;</span><span class="p">][</span><span class="s">&quot;grid_size&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span><span class="p">;</span>
<span class="n">config</span><span class="p">[</span><span class="s">&quot;options&quot;</span><span class="p">][</span><span class="s">&quot;phi_order&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="n">config</span><span class="p">[</span><span class="s">&quot;scaling_functions&quot;</span><span class="p">]</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;identity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;log10&quot;</span><span class="w"> </span><span class="p">};</span>
<span class="n">config</span><span class="p">[</span><span class="s">&quot;time_steps&quot;</span><span class="p">]</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="mi">500</span><span class="p">;</span>
<span class="n">config</span><span class="p">[</span><span class="s">&quot;time_period&quot;</span><span class="p">]</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mf">1.24709e+2</span><span class="p">;</span>

<span class="n">config</span><span class="p">.</span><span class="n">to_file</span><span class="p">(</span><span class="s">&quot;config.json&quot;</span><span class="p">);</span>

<span class="c1">// Parse JSON</span>
<span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="o">::</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;config.json&quot;</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">to_string</span><span class="p">();</span>
</code></pre></div>
<p>Output:
<div class="highlight"><pre><span></span><code>{
    &quot;auxiliary_info&quot;: true,
    &quot;date&quot;: &quot;2024.04.02&quot;,
    &quot;options&quot;: {
        &quot;grid_size&quot;: 120,
        &quot;phi_order&quot;: 5
    },
    &quot;scaling_functions&quot;: [
        &quot;identity&quot;,
        &quot;log10&quot;
    ],
    &quot;time_period&quot;: 124.709,
    &quot;time_steps&quot;: 500
}
</code></pre></div></p>
<h3 id="setters-type-conversions">Setters &amp; type conversions<a class="headerlink" href="#setters-type-conversions" title="Permanent link">&para;</a></h3>
<p>[ <a href="https://godbolt.org/z/6qM5cMTG8">Run this code</a> ] [ <a href="../examples/module_json/setters_and_type_conversions.cpp">Open source file</a> ]</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">utl</span><span class="p">;</span>

<span class="n">json</span><span class="o">::</span><span class="n">Node</span><span class="w"> </span><span class="n">json</span><span class="p">;</span>

<span class="c1">// Ways to assign a JSON object</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">][</span><span class="s">&quot;key_1&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">][</span><span class="s">&quot;key_2&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">]</span><span class="w">          </span><span class="o">=</span><span class="w">                                     </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">]</span><span class="w">          </span><span class="o">=</span><span class="w">                         </span><span class="n">json</span><span class="o">::</span><span class="n">Object</span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">]</span><span class="w">          </span><span class="o">=</span><span class="w">           </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">]</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;key_2&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>

<span class="c1">// Ways to assign a JSON array</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;array&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;array&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="o">::</span><span class="n">Array</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;array&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;array&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;array&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>

<span class="n">json</span><span class="p">[</span><span class="s">&quot;matrix&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// matrices &amp; tensors are fine too</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;tensor&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>

<span class="c1">// Ways to assign a JSON string</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;string&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">                  </span><span class="s">&quot;lorem ipsum&quot;</span><span class="w"> </span><span class="p">;</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;string&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">     </span><span class="n">json</span><span class="o">::</span><span class="n">String</span><span class="p">(</span><span class="s">&quot;lorem ipsum&quot;</span><span class="p">);</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;string&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;lorem ipsum&quot;</span><span class="p">);</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;string&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">(</span><span class="s">&quot;lorem ipsum&quot;</span><span class="p">);</span>

<span class="c1">// ...and so on and so forth with other types, same thing with custom containers.</span>
<span class="c1">// All classes can convert as long as they provide std-like API.</span>
</code></pre></div>
<h3 id="getters_1">Getters<a class="headerlink" href="#getters_1" title="Permanent link">&para;</a></h3>
<p>[ <a href="https://godbolt.org/z/oohca1aaP">Run this code</a> ] [ <a href="../examples/module_json/getters.cpp">Open source file</a> ]</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">utl</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">json</span><span class="o">::</span><span class="nn">literals</span><span class="p">;</span>

<span class="c1">// Create JSON from literal</span>
<span class="k">auto</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span>
<span class="s">    {</span>
<span class="s">        &quot;string&quot;: &quot;lorem_ipsum&quot;,</span>
<span class="s">        &quot;array&quot;: [ 1, 2, 3 ],</span>
<span class="s">        &quot;object&quot;: {</span>
<span class="s">            &quot;key_1&quot;: 3.14,</span>
<span class="s">            &quot;key_2&quot;: 6.28</span>
<span class="s">        }</span>
<span class="s">    }</span>
<span class="dl">)</span><span class="s">&quot;</span><span class="n">_utl_json</span><span class="p">;</span>

<span class="c1">// Check that node exists</span>
<span class="n">assert</span><span class="p">(</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&quot;string&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>

<span class="c1">// Check the type of a JSON node</span>
<span class="n">assert</span><span class="p">(</span><span class="w"> </span><span class="n">json</span><span class="p">[</span><span class="s">&quot;string&quot;</span><span class="p">].</span><span class="n">is_string</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>

<span class="c1">// Get typed value from a JSON node</span>
<span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">&quot;string&quot;</span><span class="p">).</span><span class="n">get_string</span><span class="p">();</span><span class="w"> </span><span class="c1">// &#39;.at(key)&#39; and &#39;[key]&#39; are both valid</span>

<span class="c1">// Iterate over a JSON object node</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">&quot;object&quot;</span><span class="p">).</span><span class="n">get_object</span><span class="p">())</span>
<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">front</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;k&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="n">get_number</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>

<span class="c1">// Iterate over a JSON array node</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">element</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">&quot;array&quot;</span><span class="p">).</span><span class="n">get_array</span><span class="p">())</span>
<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="w"> </span><span class="n">element</span><span class="p">.</span><span class="n">get_number</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<h3 id="formatting">Formatting<a class="headerlink" href="#formatting" title="Permanent link">&para;</a></h3>
<p>[ <a href="https://godbolt.org/z/b1MnbcaE6">Run this code</a> ] [ <a href="../examples/module_json/formatting.cpp">Open source file</a> ]</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">utl</span><span class="p">;</span>

<span class="n">json</span><span class="o">::</span><span class="n">Node</span><span class="w"> </span><span class="n">json</span><span class="p">;</span>

<span class="n">json</span><span class="p">[</span><span class="s">&quot;string&quot;</span><span class="p">]</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;lorem ipsum&quot;</span><span class="p">;</span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;array&quot;</span><span class="p">]</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span><span class="w"> </span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">][</span><span class="s">&quot;key_1&quot;</span><span class="p">]</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">;</span><span class="w"> </span>
<span class="n">json</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">][</span><span class="s">&quot;key_2&quot;</span><span class="p">]</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mf">6.28</span><span class="p">;</span>

<span class="c1">// Prettified/Minimized JSON</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span>
<span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;--- Prettified JSON ---&quot;</span>
<span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">&quot;</span>
<span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">to_string</span><span class="p">()</span>
<span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">&quot;</span>
<span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;--- Minimized JSON ---&quot;</span>
<span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">&quot;</span>
<span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">json</span><span class="o">::</span><span class="n">Format</span><span class="o">::</span><span class="n">MINIMIZED</span><span class="p">);</span>
</code></pre></div>
<p>Output:
<div class="highlight"><pre><span></span><code>--- Prettified JSON ---

{
    &quot;array&quot;: [
        1,
        2,
        3
    ],
    &quot;object&quot;: {
        &quot;key_1&quot;: 3.14,
        &quot;key_2&quot;: 6.28
    },
    &quot;string&quot;: &quot;lorem ipsum&quot;
}

--- Minimized JSON ---

{&quot;array&quot;:[1,2,3],&quot;object&quot;:{&quot;key_1&quot;:3.14,&quot;key_2&quot;:6.28},&quot;string&quot;:&quot;lorem ipsum&quot;}
</code></pre></div></p>
<h3 id="error-handling">Error handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h3>
<p>[ <a href="https://godbolt.org/z/Ysfj3fYxb">Run this code</a> ] [ <a href="../examples/module_json/error_handling.cpp">Open source file</a> ]</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">utl</span><span class="p">;</span>

<span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">invalid_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span>
<span class="s">    {</span>
<span class="s">        &quot;key_1&quot;: &quot;value_1&quot;,</span>
<span class="s">        &quot;key_2&quot;:  value_2&quot;,</span>
<span class="s">        &quot;key_3&quot;: &quot;value_3&quot;</span>
<span class="s">    }</span>
<span class="dl">)</span><span class="s">&quot;</span><span class="p">;</span>

<span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[[</span><span class="n">maybe_unused</span><span class="p">]]</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="o">::</span><span class="n">from_string</span><span class="p">(</span><span class="n">invalid_json</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="w"> </span><span class="o">&amp;</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;ERROR: Caught exception:</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Output:
<div class="highlight"><pre><span></span><code>ERROR: Caught exception:

JSON node selector encountered unexpected marker symbol {v} at pos 48 (should be one of {0123456789{[&quot;tfn}).
Line 4:         &quot;key_2&quot;:  value_2&quot;,
        ------------------^-------- [!]
</code></pre></div></p>
<h3 id="structure-reflection">Structure reflection<a class="headerlink" href="#structure-reflection" title="Permanent link">&para;</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When compiling with <a href="https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B">MSVC</a> use <a href="https://learn.microsoft.com/en-us/cpp/build/reference/zc-preprocessor"><code>/Zc:preprocessor</code></a> to enable standard-compliant preprocessor. Default MSVC preprocessor is notoriously non-compliant due to legacy reasons and might not handle macro expansion properly.</p>
</div>
<p>[ <a href="https://godbolt.org/z/arv1sb46r">Run this code</a> ] [ <a href="../examples/module_json/structure_reflection.cpp">Open source file</a> ]</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Config</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bool</span><span class="w">        </span><span class="n">auxiliary_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">date</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;2024.04.02&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">Options</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">grid_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">phi_order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">options</span><span class="p">;</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scaling_functions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;identity&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;log10&quot;</span><span class="p">};</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w">              </span><span class="n">time_steps</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mi">500</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w">                   </span><span class="n">time_period</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mf">1.24709e+2</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">UTL_JSON_REFLECT</span><span class="p">(</span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">auxiliary_info</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">scaling_functions</span><span class="p">,</span><span class="w"> </span><span class="n">time_steps</span><span class="p">,</span><span class="w"> </span><span class="n">time_period</span><span class="p">);</span>
<span class="n">UTL_JSON_REFLECT</span><span class="p">(</span><span class="n">Config</span><span class="o">::</span><span class="n">Options</span><span class="p">,</span><span class="w"> </span><span class="n">grid_size</span><span class="p">,</span><span class="w"> </span><span class="n">phi_order</span><span class="p">);</span>

<span class="c1">// ...</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">utl</span><span class="p">;</span>

<span class="c1">// Parse JSON from struct</span>
<span class="k">auto</span><span class="w">       </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span><span class="p">{};</span>
<span class="n">json</span><span class="o">::</span><span class="n">Node</span><span class="w"> </span><span class="n">json</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="o">::</span><span class="n">from_struct</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>

<span class="c1">// Test the result</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;--- Struct to JSON ---</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">to_string</span><span class="p">();</span>

<span class="c1">// Serialize JSON to struct</span>
<span class="k">auto</span><span class="w"> </span><span class="n">serialized_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="p">.</span><span class="n">to_struct</span><span class="o">&lt;</span><span class="n">Config</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Test the result</span>
<span class="n">assert</span><span class="p">(</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">auxiliary_info</span><span class="w">    </span><span class="o">==</span><span class="w"> </span><span class="n">serialized_config</span><span class="p">.</span><span class="n">auxiliary_info</span><span class="w">    </span><span class="p">);</span>
<span class="n">assert</span><span class="p">(</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">date</span><span class="w">              </span><span class="o">==</span><span class="w"> </span><span class="n">serialized_config</span><span class="p">.</span><span class="n">date</span><span class="w">              </span><span class="p">);</span>
<span class="n">assert</span><span class="p">(</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">options</span><span class="p">.</span><span class="n">grid_size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">serialized_config</span><span class="p">.</span><span class="n">options</span><span class="p">.</span><span class="n">grid_size</span><span class="w"> </span><span class="p">);</span>
<span class="c1">// ...and so on</span>
</code></pre></div>
<p>Output:
<div class="highlight"><pre><span></span><code>--- Struct to JSON ---
{
    &quot;auxiliary_info&quot;: true,
    &quot;date&quot;: &quot;2024.04.02&quot;,
    &quot;options&quot;: {
        &quot;grid_size&quot;: 120,
        &quot;phi_order&quot;: 5
    },
    &quot;scaling_functions&quot;: [
        &quot;identity&quot;,
        &quot;log10&quot;
    ],
    &quot;time_period&quot;: 124.709,
    &quot;time_steps&quot;: 500
}
</code></pre></div></p>
<h3 id="complex-structure-reflection">Complex structure reflection<a class="headerlink" href="#complex-structure-reflection" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are no particular limitations on what kinds of nested structures can be reflected, as long as there is a logically sound path to converting one thing to another <code>utl::json</code> will figure out a way.</p>
</div>
<p>[ <a href="https://godbolt.org/z/89KoPb3cf">Run this code</a> ] [ <a href="../examples/module_json/complex_structure_reflection.cpp">Open source file</a> ]</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Set up some complex nested structs</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">Task</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">input_path</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">output_path</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w">      </span><span class="n">time_limit</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">TaskList</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Task</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map_of_tasks</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// this is fine</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">matrix_of_points</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// this is also fine</span>

<span class="w">    </span><span class="c1">// std::vector&lt;std::vector&lt;std::vector&lt;std::map&lt;std::string, Point&gt;&gt;&gt;&gt; tensor_of_maps_of_points;</span>
<span class="w">    </span><span class="c1">// ... this would also be fine</span>

<span class="w">    </span><span class="c1">// std::array&lt;std::unordered_map&lt;std::string, Task&gt;, 4&gt; array_of_maps_of_tasks;</span>
<span class="w">    </span><span class="c1">// ... and so will be this</span>
<span class="p">};</span>

<span class="n">UTL_JSON_REFLECT</span><span class="p">(</span><span class="n">Point</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">);</span>
<span class="n">UTL_JSON_REFLECT</span><span class="p">(</span><span class="n">Task</span><span class="p">,</span><span class="w"> </span><span class="n">input_path</span><span class="p">,</span><span class="w"> </span><span class="n">output_path</span><span class="p">,</span><span class="w"> </span><span class="n">time_limit</span><span class="p">);</span>
<span class="n">UTL_JSON_REFLECT</span><span class="p">(</span><span class="n">TaskList</span><span class="p">,</span><span class="w"> </span><span class="n">map_of_tasks</span><span class="p">,</span><span class="w"> </span><span class="n">matrix_of_points</span><span class="p">);</span>

<span class="c1">// ...</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">utl</span><span class="p">;</span>

<span class="k">const</span><span class="w"> </span><span class="n">TaskList</span><span class="w"> </span><span class="n">task_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Map of tasks</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;task_1&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;input_1.dat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;output_1.dat&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">170.</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;task_2&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;input_2.dat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;output_2.dat&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">185.</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="c1">// Matrix of 3D points</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Parse JSON from struct,</span>
<span class="c1">// this also doubles as a way of stringifying structs for debugging</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">json</span><span class="o">::</span><span class="n">from_struct</span><span class="p">(</span><span class="n">task_list</span><span class="p">).</span><span class="n">to_string</span><span class="p">();</span>
</code></pre></div>
<p>Output:
<div class="highlight"><pre><span></span><code>{
    &quot;map_of_tasks&quot;: {
        &quot;task_1&quot;: {
            &quot;input_path&quot;: &quot;input_1.dat&quot;,
            &quot;output_path&quot;: &quot;output_1.dat&quot;,
            &quot;time_limit&quot;: 170
        },
        &quot;task_2&quot;: {
            &quot;input_path&quot;: &quot;input_2.dat&quot;,
            &quot;output_path&quot;: &quot;output_2.dat&quot;,
            &quot;time_limit&quot;: 185
        }
    },
    &quot;matrix_of_points&quot;: [
        [
            {
                &quot;x&quot;: 0,
                &quot;y&quot;: 0,
                &quot;z&quot;: 0
            },
            {
                &quot;x&quot;: 1,
                &quot;y&quot;: 0,
                &quot;z&quot;: 0
            }
        ],
        [
            {
                &quot;x&quot;: 0,
                &quot;y&quot;: 1,
                &quot;z&quot;: 0
            },
            {
                &quot;x&quot;: 0,
                &quot;y&quot;: 0,
                &quot;z&quot;: 1
            }
        ]
    ]
}
</code></pre></div></p>
<h2 id="tests">Tests<a class="headerlink" href="#tests" title="Permanent link">&para;</a></h2>
<p><code>utl::json</code> parsing was <a href="https://github.com/DmitriBogdanov/UTL/tree/master/tests/module_json/">tested</a> using the standard <a href="https://datatracker.ietf.org/doc/html/rfc8259">RFC-8259</a> compliance <a href="https://github.com/nst/JSONTestSuite/">testing suite</a> with following metrics:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Compliance</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>Parser accepts valid RFC-8259 JSON</td>
<td><strong>100%</strong></td>
<td>Full conformance</td>
</tr>
<tr>
<td>Parser rejects invalid RFC-8259 JSON</td>
<td><strong>93.6%</strong></td>
<td>Missing conformance of 6.4% is due to parser imposing less restrictions on the floating point format, it will accepts values such as <code>2.</code>, <code>01</code>, <code>2.e+3</code> and etc., which go beyond the default JSON specification.</td>
</tr>
</tbody>
</table>
<p>Parsing and serialization also satisfies <a href="https://en.cppreference.com/w/cpp/header/charconv">C++ <code>&lt;charconv&gt;</code></a> float round-trip guarantees (which means floats serialized by <code>utl::json</code> will be recovered to the exact same value when parsed again by the library).</p>
<h2 id="benchmarks">Benchmarks<a class="headerlink" href="#benchmarks" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/DmitriBogdanov/UTL/tree/master/benchmarks/module_json/">Benchmarks</a> for parsing and serializing of minimized JSON data corresponding to various entries in the <a href="https://github.com/DmitriBogdanov/UTL/tree/master/benchmarks/data/">test suite</a>. </p>
<div class="highlight"><pre><span></span><code>====== BENCHMARKING ON DATA: `strings.json` ======

| relative |               ms/op |                op/s |    err% |     total | Parsing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:-----------------------
|   100.0% |               16.03 |               62.40 |    4.6% |      0.81 | `utl::json`
|    25.3% |               63.43 |               15.76 |    0.4% |      3.11 | `nlohmann`
|    47.5% |               33.71 |               29.66 |    0.3% |      1.65 | `PicoJSON`
|    94.4% |               16.98 |               58.90 |    0.2% |      0.83 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Parsing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:------------------------
|   100.0% |               15.85 |               63.08 |    0.7% |      0.78 | `utl::json`
|    24.4% |               64.88 |               15.41 |    0.2% |      3.19 | `nlohmann`
|    45.6% |               34.77 |               28.76 |    0.5% |      1.69 | `PicoJSON`
|    88.1% |               17.99 |               55.60 |    0.4% |      0.88 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:---------------------------
|   100.0% |               11.90 |               84.05 |    0.2% |      0.59 | `utl::json`
|    42.2% |               28.22 |               35.44 |    0.4% |      1.39 | `nlohmann`
|    33.1% |               36.00 |               27.78 |    0.2% |      1.76 | `PicoJSON`
|    75.5% |               15.77 |               63.42 |    0.5% |      0.77 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:----------------------------
|   100.0% |               12.67 |               78.93 |    0.7% |      0.62 | `utl::json`
|    41.7% |               30.41 |               32.88 |    3.4% |      1.52 | `nlohmann`
|    33.2% |               38.20 |               26.18 |    0.6% |      1.88 | `PicoJSON`
|    75.9% |               16.69 |               59.92 |    1.2% |      0.82 | `RapidJSON`


====== BENCHMARKING ON DATA: `numbers.json` ======

| relative |               ms/op |                op/s |    err% |     total | Parsing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:-----------------------
|   100.0% |               10.95 |               91.35 |    0.7% |      0.54 | `utl::json`
|    22.9% |               47.79 |               20.92 |    0.6% |      2.35 | `nlohmann`
|    28.2% |               38.78 |               25.79 |    0.5% |      1.89 | `PicoJSON`
|   144.6% |                7.57 |              132.11 |    0.4% |      0.37 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Parsing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:------------------------
|   100.0% |               11.26 |               88.84 |    0.2% |      0.55 | `utl::json`
|    22.6% |               49.88 |               20.05 |    0.5% |      2.51 | `nlohmann`
|    28.1% |               39.99 |               25.00 |    1.4% |      1.96 | `PicoJSON`
|   128.9% |                8.73 |              114.51 |    3.1% |      0.43 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:---------------------------
|   100.0% |               11.18 |               89.44 |    1.0% |      0.55 | `utl::json`
|    65.2% |               17.14 |               58.33 |    0.4% |      0.85 | `nlohmann`
|    13.9% |               80.48 |               12.43 |    0.6% |      3.95 | `PicoJSON`
|    63.9% |               17.51 |               57.13 |    1.1% |      0.85 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:----------------------------
|   100.0% |               13.43 |               74.48 |    1.0% |      0.66 | `utl::json`
|    65.0% |               20.64 |               48.44 |    0.6% |      1.02 | `nlohmann`
|    16.3% |               82.14 |               12.17 |    0.4% |      4.04 | `PicoJSON`
|    74.3% |               18.06 |               55.38 |    0.4% |      0.89 | `RapidJSON`


====== BENCHMARKING ON DATA: `twitter.json` ======

| relative |               ms/op |                op/s |    err% |     total | Parsing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:-----------------------
|   100.0% |                2.48 |              402.89 |    0.5% |      0.12 | `utl::json`
|    45.4% |                5.47 |              182.76 |    0.1% |      0.27 | `nlohmann`
|    77.3% |                3.21 |              311.24 |    0.2% |      0.16 | `PicoJSON`
|   221.6% |                1.12 |              892.87 |    1.3% |      0.05 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Parsing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:------------------------
|   100.0% |                2.80 |              356.62 |    0.5% |      0.14 | `utl::json`
|    45.2% |                6.21 |              161.12 |    0.4% |      0.31 | `nlohmann`
|    74.9% |                3.74 |              267.05 |    0.6% |      0.18 | `PicoJSON`
|   207.1% |                1.35 |              738.54 |    1.5% |      0.07 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:---------------------------
|   100.0% |                1.20 |              834.42 |    2.0% |      0.06 | `utl::json`
|    52.8% |                2.27 |              440.27 |    2.0% |      0.13 | `nlohmann`
|    29.0% |                4.14 |              241.62 |   21.3% |      0.20 | `PicoJSON`
|    94.3% |                1.27 |              786.88 |    0.6% |      0.06 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:----------------------------
|   100.0% |                1.60 |              626.16 |    0.4% |      0.08 | `utl::json`
|    57.9% |                2.76 |              362.32 |    0.3% |      0.14 | `nlohmann`
|    44.4% |                3.60 |              277.81 |    0.4% |      0.18 | `PicoJSON`
|    91.1% |                1.75 |              570.23 |    0.6% |      0.09 | `RapidJSON`


====== BENCHMARKING ON DATA: `apache_builds.json` ======

| relative |               ms/op |                op/s |    err% |     total | Parsing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:-----------------------
|   100.0% |                0.47 |            2,134.76 |    0.7% |      0.02 | `utl::json`
|    41.3% |                1.14 |              881.03 |    1.6% |      0.06 | `nlohmann`
|    77.4% |                0.61 |            1,652.53 |    0.6% |      0.03 | `PicoJSON`
|   172.2% |                0.27 |            3,675.37 |    1.3% |      0.01 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Parsing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:------------------------
|   100.0% |                0.49 |            2,053.48 |    0.3% |      0.02 | `utl::json`
|    38.7% |                1.26 |              794.02 |    1.4% |      0.06 | `nlohmann`
|    71.5% |                0.68 |            1,468.49 |    0.7% |      0.03 | `PicoJSON`
|   163.1% |                0.30 |            3,348.22 |    0.8% |      0.01 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:---------------------------
|   100.0% |                0.30 |            3,283.66 |    0.7% |      0.02 | `utl::json`
|    57.5% |                0.53 |            1,889.72 |    0.8% |      0.03 | `nlohmann`
|    46.2% |                0.66 |            1,518.06 |    0.6% |      0.03 | `PicoJSON`
|   100.5% |                0.30 |            3,301.60 |    2.2% |      0.02 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:----------------------------
|   100.0% |                0.40 |            2,488.96 |    2.3% |      0.02 | `utl::json`
|    61.9% |                0.65 |            1,540.09 |    1.5% |      0.03 | `nlohmann`
|    53.8% |                0.75 |            1,338.57 |    1.6% |      0.04 | `PicoJSON`
|    98.9% |                0.41 |            2,461.15 |    3.0% |      0.02 | `RapidJSON`
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Clang with <code>libc++</code> below version 20 does not implement C++17 <code>std::from_chars</code>, forcing the library to fallback onto a significantly slower number parsing routine. This is mostly a MacOS issue. Fallback presence can be detected with <code>#ifdef UTL_JSON_FROM_CHARS_FALLBACK</code>.</p>
</div>
<h3 id="some-thoughts-on-implementation">Some thoughts on implementation<a class="headerlink" href="#some-thoughts-on-implementation" title="Permanent link">&para;</a></h3>
<p>The main weak-point of <code>utl::json</code> from the performance point of view is parsing  of object-heavy JSONs.</p>
<p>Unfortunately, the issue is mostly caused by <code>std::map</code> insertion &amp; iteration, which dominates the runtime. A truly suitable for the purpose container doesn't really exist in the standard library, and would need a custom implementation like in <code>RapidJSON</code>, which would reduce the standard library interoperability thus going against the main goal of this library which is its simplicity of use.</p>
<p>Flat maps maps seem like the way to go, slotting in a custom flat map implementation into <code>impl::object_type_impl</code> allowed <code>utl::json</code> to beat <code>RapidJSON</code> on all serializing tasks and significantly closed the gap of <code>database.json</code> parsing:</p>
<div class="highlight"><pre><span></span><code>// Using associative wrapper for std::vector of pairs instead of std::map we can bridge the performance gap.
// General-case usage however suffers, which is why this decision was ruled against.
// Measurement below was done on a database very similar to &#39;twitter.json&#39; but with even more objects &amp; nesting.

====== BENCHMARKING ON DATA: `database.json` ======

| relative |               ms/op |                op/s |    err% |     total | Parsing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:-----------------------
|   100.0% |               13.22 |               75.65 |    0.6% |      0.95 | `utl::json`
|    24.7% |               53.57 |               18.67 |    3.6% |      3.93 | `nlohmann`
|    43.5% |               30.42 |               32.87 |    0.7% |      2.19 | `PicoJSON`
|   139.5% |                9.48 |              105.51 |    0.2% |      0.68 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Parsing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:------------------------
|   100.0% |               14.28 |               70.02 |    0.5% |      1.03 | `utl::json`
|    25.8% |               55.36 |               18.06 |    0.5% |      3.99 | `nlohmann`
|    41.1% |               34.75 |               28.78 |    0.2% |      2.50 | `PicoJSON`
|   130.4% |               10.95 |               91.33 |    0.4% |      0.79 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing minimized JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:---------------------------
|   100.0% |                8.47 |              118.00 |    0.2% |      0.61 | `utl::json`
|    35.7% |               23.74 |               42.12 |    0.3% |      1.71 | `nlohmann`
|    23.6% |               35.85 |               27.89 |    0.4% |      2.57 | `PicoJSON`
|    94.4% |                8.97 |              111.43 |    0.3% |      0.65 | `RapidJSON`

| relative |               ms/op |                op/s |    err% |     total | Serializing prettified JSON
|---------:|--------------------:|--------------------:|--------:|----------:|:----------------------------
|   100.0% |               10.09 |               99.12 |    0.4% |      0.73 | `utl::json`
|    39.2% |               25.74 |               38.85 |    0.5% |      1.85 | `nlohmann`
|    26.8% |               37.61 |               26.59 |    0.4% |      2.71 | `PicoJSON`
|    93.7% |               10.77 |               92.87 |    0.2% |      0.78 | `RapidJSON`
</code></pre></div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023–2025 Dmitri Bogdanov
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/DmitriBogdanov" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["toc.follow", "content.code.copy", "search.suggest", "content.tooltips"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="mkdocs/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="mkdocs/modification/header_title.js"></script>
      
        <script src="mkdocs/modification/relative_links.js"></script>
      
    
  </body>
</html>